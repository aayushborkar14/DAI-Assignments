\ProvidesPackage{nirav}

\RequirePackage{
    amsmath, 
    amsthm, 
    amssymb, 
    amsfonts,
    tikz, 
    mathrsfs,
    fancyhdr,
    lipsum,
    nicefrac,
    xspace,
    anyfontsize,
    todonotes,
    lastpage,
    commath,
    float,
    soul,
    theoremref,
    scalerel,
    tikz-cd,
    microtype,
    titlesec,
    tcolorbox,
    bm,
    amscd,
    enumerate,
    enumitem,
    pgf,
    mathtools, 
    doi,
    graphicx,
    esvect,
    commath,
    tgpagella,
    listings,
    tocloft,
    titletoc,
    hyperref,
    bookmark,
    todonotes,
    cite,
    stmaryrd,
    array,
    booktabs,
}


\RequirePackage{xcolor}
% \usepackage[usenames,dvipsnames]{color}
\RequirePackage[framemethod=tikz]{mdframed}
\usetikzlibrary{automata, arrows.meta, positioning, cd}
\RequirePackage[all,cmtip]{xy}
\usepackage[tmargin=1in, bmargin=1in, lmargin=0.75in, rmargin=0.75in]{geometry}

% Input and Fonts
\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}
\RequirePackage{lmodern} % Latin Modern fonts

\RequirePackage{microtype} % To address LaTeX font warnings

\renewcommand{\familydefault}{\rmdefault}

\usepackage{titlesec}
\titleformat{\chapter}[display]{\rmfamily\Huge\bfseries}{Chapter \thechapter.}{0.25cm}{\Huge}
\titleformat{\section}[block]{\sffamily\Large\filcenter\bfseries}{\S\thesection.}{0.25cm}{\Large}
\titleformat{\subsection}[block]{\large\bfseries\sffamily}{\thesubsection.}{0.2cm}{\large}
\titleformat{\subsubsection}[block]{\large\bfseries\sffamily}{\normalsize\thesubsubsection.}{0.15cm}{\normalsize}

\usepackage{fancyhdr}
\lhead{\sffamily{\topicname}}
\chead{\sffamily{\thepage~/~\pageref*{LastPage}}}
\rhead{\sffamily{\myname}}
\cfoot{}
\pagestyle{fancy}

\lstset{
    backgroundcolor=\color{gray!10}, % Set the background color
    numbers=left, % Display line numbers
    numberstyle=\tiny\color{gray}, % Style for the line numbers
    breaklines=true, % Enable line breaking
    basicstyle=\small\ttfamily, % Set the basic style for the code
    literate={‚ê£}{}{0\discretionary{ }{}{}}, % Replace non-breaking space with regular space
    keywordstyle=\color{blue}, % Style for keywords
    commentstyle=\color{green!50!black}, % Style for comments
    % stringstyle=\color{black}, % Style for strings
    % morekeywords={*,...}, % Add more keywords if needed
    showstringspaces=false, % Do not emphasize spaces in strings
} 

\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{1}
\setlength\parindent{0pt}

\newcommand{\Mod}[1]{\ (\mathrm{mod}\ #1)}

\renewcommand{\qedsymbol}{$\blacksquare$}
\renewcommand{\emptyset}{\varnothing}
\newcommand{\defeq}{\coloneqq}
\newcommand{\eqdef}{\eqqcolon}

\AtBeginDocument{\clearpage\setcounter{page}{0}}

\newcommand{\R}{\mathbb{R}}
\newcommand{\Rp}{\mathbb{R}^+}
\newcommand{\Rn}{\mathbb{R}^n}
\newcommand{\C}{\mathbb{C}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\E}{\mathbb{E}}
\newcommand{\pE}{\widetilde{\E}}
\newcommand{\vol}{\operatorname{vol}}
\newcommand{\supp}{\operatorname{supp}}
\newcommand{\indic}{\mathbbm{1}}
\DeclareMathOperator{\Var}{Var}
% \newcommand{\bigplus}{\scalerel*{+}{\textstyle\sum}}
\newcommand{\im}{\operatorname{im}}
\newcommand{\Hom}{\operatorname{Hom}}
\newcommand{\diag}{\operatorname{diag}}
\newcommand{\Tr}{\operatorname{Tr}}
\newcommand{\incl}{\hookrightarrow}
\newcommand{\Id}{\operatorname{Id}}
\newcommand{\bId}{\mathbb{I}}
\newcommand{\rank}{\operatorname{rank}}
\newcommand{\Cov}{\operatorname{Cov}}
\newcommand\opnorm[1]{\norm{#1}_\text{op}}
\newcommand{\inv}{\operatorname{inv}}
\newcommand{\sign}{\operatorname{sign}}
\newcommand{\maj}{\operatorname{maj}}
\newcommand{\wt}{\operatorname{wt}}
\newcommand{\GL}{\operatorname{GL}}
\newcommand{\restr}[2]{\ensuremath{\left.#1\right|_{#2}}}
\newcommand{\End}{\operatorname{End}}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\newcommand{\poly}{\operatorname{poly}}
\newcommand{\Span}{\operatorname{span}}
\newcommand{\NP}{\mathsf{NP}}
\newcommand{\pge}{\succcurlyeq} % poset le
\newcommand{\ple}{\preccurlyeq} % poset le

% Group Theory
% \left\normalsubgroup\trianglelefteqslant
\newcounter{dummy}
\numberwithin{dummy}{section}

\numberwithin{equation}{section}
\theoremstyle{definition}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{question}[theorem]{Question}
\newtheorem{problem}[theorem]{Problem}
\newenvironment{solution}{\begin{proof}[Solution]}{\end{proof}}

\let\theorem\undefined
\let\endtheorem\undefined
\let\lemma\undefined
\let\endlemma\undefined
\let\corollary\undefined
\let\endcorollary\undefined
\let\definition\undefined
\let\enddefinition\undefined
\let\example\undefined
\let\endexample\undefined
\let\remark\undefined
\let\endremark\undefined
\let\claim\undefined
\let\endclaim\undefined
\let\question\undefined
\let\endquestion\undefined
\let\problem\undefined
\let\endproblem\undefined

% Define new theorem-like environments with colored backgrounds
\mdfdefinestyle{theorembox}{
  backgroundcolor=cyan!20,
  linecolor=black,
  linewidth=1pt,
  topline=false,
  rightline=false,
  bottomline=false,
  leftline=true,
  skipabove=10pt,
  skipbelow=10pt,
  innertopmargin=0pt,
  innerbottommargin=10pt,
  leftmargin=0pt,
  rightmargin=0pt,
  innerleftmargin=15pt,
  innerrightmargin=15pt,
}

\mdfdefinestyle{definitionbox}{
  backgroundcolor=green!20,
  linecolor=black,
  linewidth=1pt,
  topline=false,
  rightline=false,
  bottomline=false,
  leftline=true,
  skipabove=10pt,
  skipbelow=10pt,
  innertopmargin=0pt,
  innerbottommargin=10pt,
  leftmargin=0pt,
  rightmargin=0pt,
  innerleftmargin=15pt,
  innerrightmargin=15pt,
}

\mdfdefinestyle{examplebox}{
  backgroundcolor=blue!10,
  linecolor=black,
  linewidth=1pt,
  topline=false,
  rightline=false,
  bottomline=false,
  leftline=true,
  skipabove=10pt,
  skipbelow=10pt,
  innertopmargin=0pt,
  innerbottommargin=10pt,
  leftmargin=0pt,
  rightmargin=0pt,
  innerleftmargin=15pt,
  innerrightmargin=15pt,
}

\mdfdefinestyle{remarkbox}{
  backgroundcolor=red!10,
  linecolor=black,
  linewidth=1pt,
  topline=false,
  rightline=false,
  bottomline=false,
  leftline=true,
  skipabove=10pt,
  skipbelow=10pt,
  innertopmargin=0pt,
  innerbottommargin=10pt,
  leftmargin=0pt,
  rightmargin=0pt,
  innerleftmargin=15pt,
  innerrightmargin=15pt,
}

\mdfdefinestyle{claimbox}{
  backgroundcolor=lime!20,
  linecolor=black,
  linewidth=1pt,
  topline=false,
  rightline=false,
  bottomline=false,
  leftline=true,
  skipabove=10pt,
  skipbelow=10pt,
  innertopmargin=0pt,
  innerbottommargin=10pt,
  leftmargin=0pt,
  rightmargin=0pt,
  innerleftmargin=15pt,
  innerrightmargin=15pt,
}

\mdfdefinestyle{questionproblembox}{
  backgroundcolor=yellow!20,
  linecolor=black,
  linewidth=1pt,
  topline=false,
  rightline=false,
  bottomline=false,
  leftline=true,
  skipabove=10pt,
  skipbelow=10pt,
  innertopmargin=0pt,
  innerbottommargin=10pt,
  leftmargin=0pt,
  rightmargin=0pt,
  innerleftmargin=15pt,
  innerrightmargin=15pt,
}

\mdfdefinestyle{lemmacorollarybox}{
  backgroundcolor=orange!20,
  linecolor=black,
  linewidth=1pt,
  topline=false,
  rightline=false,
  bottomline=false,
  leftline=true,
  skipabove=10pt,
  skipbelow=10pt,
  innertopmargin=0pt,
  innerbottommargin=10pt,
  leftmargin=0pt,
  rightmargin=0pt,
  innerleftmargin=15pt,
  innerrightmargin=15pt,
}

% Define new theorem-like environments
\mdtheorem[style=theorembox]{theorem}{Theorem}[section]
\mdtheorem[style=lemmacorollarybox]{lemma}[theorem]{Lemma}
\mdtheorem[style=lemmacorollarybox]{corollary}[theorem]{Corollary}
\mdtheorem[style=definitionbox]{definition}[theorem]{Definition}
\mdtheorem[style=examplebox]{example}[theorem]{Example}
\mdtheorem[style=remarkbox]{remark}[theorem]{Remark}
\mdtheorem[style=claimbox]{claim}[theorem]{Claim}
\mdtheorem[style=questionproblembox]{question}[theorem]{Question}
\mdtheorem[style=questionproblembox]{problem}[theorem]{Problem}

\newcommand{\HRule}[1]{\rule{\linewidth}{#1}}

\newcommand*{\titleBC}{\begingroup % Create the command for including the title page in the document
    \centering % Center all text

    \def\CP{\Huge \scshape \topicname} % Title

    \settowidth{\unitlength}{\CP} % Set the width of the curly brackets to the width of the title
    \HRule{0.5pt} \\[0.6cm]
    {\CP} \\[\baselineskip] % Print title
    \HRule{0.5pt} \\[0.5cm]
    \vspace{0.5cm}

    {\Large\textsf{\myname}}\\ % Author name
    \vspace{0.5cm}
    {\large\textsf{\rollNumbers}}

    \vspace{0.4cm}
    Last updated \today % Year published

\endgroup}

\hypersetup{
  pdfborder=0 0 0,
  colorlinks,
  citecolor=green,
  filecolor=blue,
  linkcolor=red,
  urlcolor=magenta
}

\renewcommand{\cftsecfont}{\color{red}\normalfont}
\renewcommand{\cftsubsecfont}{\color{red}\normalfont}
\renewcommand{\cftsubsubsecfont}{\color{red}\normalfont}

\endinput